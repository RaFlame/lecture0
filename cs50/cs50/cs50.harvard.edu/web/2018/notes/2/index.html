<!DOCTYPE html><html lang="en-us">
<!-- Mirrored from cs50.harvard.edu/web/2018/notes/2/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 31 May 2020 07:07:59 GMT -->
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta property="og:description" content="This course picks up where Harvard University's CS50 leaves off, diving more deeply into the design and implementation of web apps with Python, JavaScript, and SQL using frameworks like Flask, Django, and Bootstrap. Topics include database design, scalability, security, and user experience. Through hands-on projects, students learn to write and use APIs, create interactive UIs, and leverage cloud services like GitHub and Heroku. By semester's end, students emerge with knowledge and experience in principles, languages, and tools that empower them to design and deploy applications on the Internet.">

<meta property="og:image" content="../../../../../img.youtube.com/vi/24Kf3v7kZyE/maxresdefault.jpg"><meta property="og:title" content="Python and Flask - CS50's Web Programming with Python and JavaScript"><link href="../../faviconb8b0.ico?1590121405" rel="icon">

<!-- https://fontawesome.com/how-to-use/on-the-web/referencing-icons/basic-use -->
<link href="../../assets/%40fortawesome/fontawesome-free/css/all.minb8b0.css?1590121405" rel="stylesheet">

<link href="../../assets/pageb8b0.css?1590121405" rel="stylesheet">

<!-- http://getbootstrap.com/docs/4.3/getting-started/introduction/ -->
<script src="../../assets/jquery/dist/jquery.minb8b0.js?1590121405"></script>
<script src="../../assets/popper.js/dist/umd/popper.minb8b0.js?1590121405"></script>
<script src="../../assets/bootstrap/dist/js/bootstrap.minb8b0.js?1590121405"></script>

<!-- https://github.com/pellepim/jstimezonedetect -->
<script src="../../assets/jstz.minb8b0.js?1590121405"></script>

<!-- https://momentjs.com/, https://momentjs.com/timezone/ -->
<script src="../../assets/moment.minb8b0.js?1590121405"></script>
<script src="../../assets/moment-timezone-with-data.minb8b0.js?1590121405"></script>



<script src="../../assets/jekyll-theme-cs50b8b0.js?1590121405"></script>

<title>Python and Flask - CS50's Web Programming with Python and JavaScript</title>
</head>

    <body>

        

        <div class="container-fluid">

            <div class="row">

                <aside class="col-md">
 
                    <header><h1 data-id="cs50s-web-programming-with-python-and-javascript"><a href="../../index.html">CS50’s Web Programming with Python and JavaScript</a></h1>

<p>OpenCourseWare</p>

<p><a href="https://brianyu.me/">Brian Yu</a><br>
<a href="mailto:brian@cs.harvard.edu">brian@cs.harvard.edu</a></p>

<p><a href="https://cs.harvard.edu/malan/">David J. Malan</a><br>
<a href="mailto:malan@harvard.edu">malan@harvard.edu</a><br>
<a href="https://www.facebook.com/dmalan" class="pr-1"><i class="fab fa-facebook-f"></i></a>
<a href="https://github.com/dmalan" class="pr-1"><i class="fab fa-github"></i></a>
<a href="https://www.instagram.com/davidjmalan/" class="pr-1"><i class="fab fa-instagram"></i></a>
<a href="https://www.linkedin.com/in/malan/" class="pr-1"><i class="fab fa-linkedin-in"></i></a>
<a href="https://www.quora.com/profile/David-J-Malan" class="pr-1"><i class="fab fa-quora"></i></a>
<a href="https://twitter.com/davidjmalan" class="pr-1"><i class="fab fa-twitter"></i></a></p></header>

                    

                    <button aria-controls="nav" aria-expanded="false" class="btn btn-sm collapsed d-md-none" data-target="aside > nav" data-toggle="collapse">
                        Menu
                    </button>

                    <nav class="collapse d-md-block" id="nav"><hr>

<ol start="0">
  <li><a href="../../index.html#git">Git</a></li>
  <li><a href="../../index.html#html-css">HTML, CSS</a></li>
  <li><a href="../../index.html#flask">Flask</a></li>
  <li><a href="../../index.html#sql">SQL</a></li>
  <li><a href="../../index.html#orms-apis">ORMs, APIs</a></li>
  <li><a href="../../index.html#javascript">JavaScript</a></li>
  <li><a href="../../index.html#front-ends">Front Ends</a></li>
  <li><a href="../../index.html#django">Django</a></li>
  <li><a href="../../index.html#testing-cicd">Testing, CI/CD</a></li>
  <li><a href="../../index.html#github-travis-ci">GitHub, Travis CI</a></li>
  <li><a href="../../index.html#scalability">Scalability</a></li>
  <li><a href="../../index.html#security">Security</a></li>
</ol>

<hr>

<p><a href="../../certificate/index.html">CS50 Certificate</a></p>

<hr>

<ul>
  <li data-marker="*"><a href="https://cs50.harvard.edu/web/ed">Ed Discussion</a> for Q&amp;A</li>
  <li data-marker="*" class="small"><a href="../../quickstart.pdf">Quick Start Guide</a></li>
</ul>

<hr>

<ul class="small">
  <li data-marker="*"><a href="https://cs50.edx.org/web">edX</a></li>
  <li data-marker="*"><a href="https://itunes.apple.com/us/course/cs50s-web-programming-with-python-and-javascript/id1409824690">iTunes U</a></li>
  <li data-marker="*"><a href="https://www.youtube.com/playlist?list=PLhQjrBD2T382hIW-IsOVuXP1uMzEvmcE5">YouTube</a></li>
</ul>

<hr>

<ul class="small">
  <li data-marker="*"><a href="https://discord.gg/T8QZqRx">Discord</a></li>
  <li data-marker="*"><a href="https://www.facebook.com/groups/cs50/">Facebook Group</a></li>
  <li data-marker="*"><a href="https://www.facebook.com/cs50/">Facebook Page</a></li>
  <li data-marker="*"><a href="https://instagram.com/cs50">Instagram</a></li>
  <li data-marker="*"><a href="https://www.linkedin.com/groups/7437240/">LinkedIn Group</a></li>
  <li data-marker="*"><a href="https://www.quora.com/topic/CS50">Quora</a></li>
  <li data-marker="*"><a href="https://www.snapchat.com/add/cs50">Snapchat</a></li>
  <li data-marker="*"><a href="https://twitter.com/cs50">Twitter</a></li>
  <li data-marker="*"><a href="http://www.youtube.com/subscription_center?add_user=cs50tv">YouTube</a></li>
</ul>

<hr>

<p><a href="https://cs50.harvardshop.com/"><img src="https://drive.google.com/uc?export=view&amp;id=1oWgwFDv5cvtev23emjNlZfK64MEOmVu9" alt="Harvard Shop"></a></p>

<hr></nav>

                    <footer><p><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" class="small">CC BY-NC-SA 4.0</a></p></footer>

                </aside>

                <main class="col-md markdown-body">

                    <h1 id="python-and-flask">Python and Flask</h1>

<h2 id="python">Python</h2>

<ul>
  <li data-marker="*">In this class, Python 3.6 will be used. For those unfamiliar, Python is an interpreted language that will be used in the context of this class to generate dynamic websites and web applications.</li>
  <li data-marker="*">Some basic Python syntax:
    <ul>
      <li data-marker="*">Print a string to the screen:
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">print</span><span class="p">(</span><span class="s">"Hello, world!"</span><span class="p">)</span>
</code></pre></div>        </div>
      </li>
      <li data-marker="*">Print a format string (variable names enclosed with <code class="highlighter-rouge">{}</code> will be replaced by variable values)
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">print</span><span class="p">(</span><span class="s">f"Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">!"</span><span class="p">)</span>
</code></pre></div>        </div>
      </li>
      <li data-marker="*">Set variable <code class="highlighter-rouge">name</code> to the user input returned by <code class="highlighter-rouge">input()</code>
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>
</code></pre></div>        </div>
      </li>
      <li data-marker="*">Conditional statement:
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="s">"x is positive"</span><span class="p">)</span>
  <span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="s">"x is negative"</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="s">"x is zero"</span><span class="p">)</span>
</code></pre></div>        </div>
        <ul>
          <li data-marker="*"><code class="highlighter-rouge">elif</code> and <code class="highlighter-rouge">else</code> blocks are optional.</li>
          <li data-marker="*">Note that indentation in Python is not stylistic, but rather is used to demarcate blocks of code. In this example, the Python interpreter knows where the conditional <code class="highlighter-rouge">if</code> block ends and the <code class="highlighter-rouge">elif</code> block begins because of the changes in indentation.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="data-types">Data Types</h3>

<ul>
  <li data-marker="*"><code class="highlighter-rouge">int</code> : integer value</li>
  <li data-marker="*"><code class="highlighter-rouge">float</code> : floating point value</li>
  <li data-marker="*"><code class="highlighter-rouge">str</code> : text string</li>
  <li data-marker="*"><code class="highlighter-rouge">bool</code> : boolean value (<code class="highlighter-rouge">True</code> or <code class="highlighter-rouge">False</code>)</li>
  <li data-marker="*"><code class="highlighter-rouge">None</code> : empty value</li>
  <li data-marker="*">Note that Python is a weakly typed language.</li>
</ul>

<h3 id="sequences">Sequences</h3>

<ul>
  <li data-marker="*">Strings:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">name</span> <span class="o">=</span> <span class="s">"Alice"</span>
  <span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Strings are justs sequence of characters, and can be indexed as such.</li>
    </ul>
  </li>
  <li data-marker="*">Tuples:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">coordinates</span> <span class="o">=</span> <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Tuples are immutable collections of values under a single name, which can be indexed positionally.</li>
    </ul>
  </li>
  <li data-marker="*">Lists:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Alice"</span><span class="p">,</span> <span class="s">"Bob"</span><span class="p">,</span> <span class="s">"Charlie"</span><span class="p">]</span>
  <span class="k">print</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Lists are mutable collections of values under a single name, which can be indexed positionally.</li>
      <li data-marker="*">Indexing out of range raises a Python ‘exception’. In this case, an <code class="highlighter-rouge">IndexError</code>, because there is no fourth value in <code class="highlighter-rouge">names</code> for Python to return.</li>
    </ul>
  </li>
  <li data-marker="*">
    <p>Note that any sequence in Python can contain any number of data types.</p>
  </li>
  <li data-marker="*">Sets:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
  <span class="n">s</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="n">s</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
  <span class="n">s</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Sets are unordered collection of unique items. Because they are unordered, they cannot be indexed.</li>
      <li data-marker="*"><code class="highlighter-rouge">s</code> is a <code class="highlighter-rouge">set</code>, an unordered collection of unique items</li>
    </ul>
  </li>
  <li data-marker="*">Dictionaries:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">ages</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Alice"</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s">"Bob"</span><span class="p">:</span> <span class="mi">27</span><span class="p">}</span>
  <span class="k">print</span><span class="p">(</span><span class="n">ages</span><span class="p">[</span><span class="s">"Alice"</span><span class="p">])</span>
  <span class="n">ages</span><span class="p">[</span><span class="s">"Alice"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Dictionaries (or dicts) are like lists, except that they are unordered and their <code class="highlighter-rouge">value</code>s are indexed by <code class="highlighter-rouge">keys</code>.</li>
      <li data-marker="*">The <code class="highlighter-rouge">+=</code> operator increments the left-hand side by the right-hand side.</li>
    </ul>
  </li>
</ul>

<h3 id="loops">Loops</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre></div></div>
<ul>
  <li data-marker="*">For-loops iterate over their bodies a limited number of times. In this case, the number of iterations is set by <code class="highlighter-rouge">range(5)</code>.</li>
  <li data-marker="*"><code class="highlighter-rouge">range(5)</code> returns the sequence of numbers starting at 0 through 4. Each value is passed to <code class="highlighter-rouge">i</code> once, resulting in the loop running a total of 5 times. <code class="highlighter-rouge">i</code> is normally referred to as an iterator variable.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></div>
<ul>
  <li data-marker="*">This for-loop iterates over <code class="highlighter-rouge">names</code>, which is a list. Every value in the list is assigned, in order, to the iterator <code class="highlighter-rouge">name</code> once.</li>
</ul>

<h3 id="functions">Functions</h3>

<ul>
  <li data-marker="*">Python has built-in functions, such as <code class="highlighter-rouge">print()</code> and <code class="highlighter-rouge">input()</code>, but Python also allows for the creation of user-defined functions
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">This is a function called <code class="highlighter-rouge">square</code>, which takes a single argument <code class="highlighter-rouge">x</code>, and returns the value <code class="highlighter-rouge">x * x</code>.</li>
      <li data-marker="*">Like loops, the body of a function must be indented.
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"{} squared is {}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">square</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
</code></pre></div>        </div>
        <ul>
          <li data-marker="*">This loop, which prints out the results of <code class="highlighter-rouge">square</code> with a range of arguments, using an older method for format strings.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li data-marker="*">Trying to call a function that hasn’t been defined will raise a <code class="highlighter-rouge">NameError</code> exception.</li>
</ul>

<h3 id="modules">Modules</h3>

<ul>
  <li data-marker="*">Modules are separate <code class="highlighter-rouge">.py</code> files of code, often written by others, used in a new file without rewriting all the old code again. Using modules allows, for example, the use of functions across a program larger than a single file.</li>
  <li data-marker="*">Assuming the <code class="highlighter-rouge">square</code> function in the earlier example was saved in <code class="highlighter-rouge">functions.py</code>, adding this line atop a new module will allow for the use of <code class="highlighter-rouge">square</code> there as well.
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">from</span> <span class="nn">functions</span> <span class="kn">import</span> <span class="n">square</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">If, for example, <code class="highlighter-rouge">functions.py</code> also included the example loop demonstration of the <code class="highlighter-rouge">square</code> function, that loop would be executed every time <code class="highlighter-rouge">square</code> was imported from <code class="highlighter-rouge">functions</code>, because the Python interpreter reads through the entire <code class="highlighter-rouge">functions.py</code> file. To remedy this, code that should only run when their containing file is run directly should be encapsulated in a function, called, for example, <code class="highlighter-rouge">main</code>. After, the following should be appended:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
      <span class="n">main</span><span class="p">()</span>
</code></pre></div>    </div>
    <p>This should be interpreted as saying ‘if this file is currently being run’, execute <code class="highlighter-rouge">main</code>.</p>
  </li>
</ul>

<h3 id="classes">Classes</h3>

<ul>
  <li data-marker="*">A Python <code class="highlighter-rouge">class</code> can be thought of as a way to define a new, custom Python data type, somewhat analagous to defining a custom function.</li>
  <li data-marker="*">This creates a new <code class="highlighter-rouge">class</code> called <code class="highlighter-rouge">Point</code>:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
      <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
          <span class="bp">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
          <span class="bp">self</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">The <code class="highlighter-rouge">__init__</code> function is a special function that defines the information needed when a new <code class="highlighter-rouge">Point</code> is created. <code class="highlighter-rouge">self</code> is always required, which refers to the <code class="highlighter-rouge">Point</code> being created, while <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> are its coordinates.</li>
      <li data-marker="*"><code class="highlighter-rouge">self.x</code> and <code class="highlighter-rouge">self.y</code> actually do the work of creating <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> attributes for the <code class="highlighter-rouge">Point</code> and assigning the m the values passed to <code class="highlighter-rouge">__init__</code>.</li>
      <li data-marker="*">By convention, <code class="highlighter-rouge">class</code> names tend to start with a capital letter.</li>
    </ul>
  </li>
  <li data-marker="*">This instantiates a new <code class="highlighter-rouge">Point</code> with <code class="highlighter-rouge">x = 3</code> and <code class="highlighter-rouge">y = 5</code>:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">When this line is run, the <code class="highlighter-rouge">__init__</code> function of the <code class="highlighter-rouge">Point</code> class is automatically run.</li>
    </ul>
  </li>
  <li data-marker="*">To access the <code class="highlighter-rouge">x</code> attribute of <code class="highlighter-rouge">p</code>, use dot notation:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">print</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="flask">Flask</h2>

<ul>
  <li data-marker="*">HTTP (Hypertext Transfer Protocol) is the system the internet uses to interact and communicate between computers and servers. When a URL is entered into a browser, an HTTP request is sent to a server, which interprets the request and sends appropriate HTTP response, which, if all goes as expected, contains the requested information to be displayed by the web browser.</li>
  <li data-marker="*">Having already begun to design websites, the next step is to write the code that takes care of the server-side processing: receiving and interpreting requests, and generating a response for the user.</li>
  <li data-marker="*">Flask a microframework written in Python that makes it easy to get a simple web application up and running with some features that can be useful in the development process.</li>
</ul>

<h3 id="a-simple-app">A Simple App</h3>

<ul>
  <li data-marker="*">Flask code is generally stored inside <code class="highlighter-rouge">application.py</code>, and might look like so:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span> <span class="c1"># Import the class `Flask` from the `flask` module, written by someone else.
</span>
  <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span> <span class="c1"># Instantiate a new web application called `app`, with `__name__` representing the current file
</span>
  <span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span> <span class="c1"># A decorator; when the user goes to the route `/`, exceute the function immediately below
</span>  <span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
      <span class="k">return</span> <span class="s">"Hello, world!"</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Flask is designed in terms of routes. A route is the part of the URL that determines which page is being requested. The route for the default page is simply <code class="highlighter-rouge">/</code>.</li>
    </ul>
  </li>
  <li data-marker="*">To start up a flask application, run <code class="highlighter-rouge">flask run</code> in the directory where <code class="highlighter-rouge">application.py</code> is located, with <code class="highlighter-rouge">flask</code> being the web server. Flask will print out the URL the server is running on and where the website can be accessed at.
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">flask run</code> produces an error, try running <code class="highlighter-rouge">export FLASK_APP=application.py</code> to make sure it knows to look for <code class="highlighter-rouge">application.py</code> as the web server.</li>
    </ul>
  </li>
</ul>

<h3 id="fancier-flask-and-jinja2">Fancier Flask and Jinja2</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/&lt;string:name&gt;"</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">f"Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">!"</span>
</code></pre></div></div>

<ul>
  <li data-marker="*">When any string is entered as a route, that will be stored as <code class="highlighter-rouge">name</code>, which is can then be used inside the decorated function.</li>
  <li data-marker="*">Since Python code is rendering the website, anything Python is capable of can be used. For example, <code class="highlighter-rouge">name</code> can be capitalized before it’s displayed:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">.</span><span class="n">capitalize</span><span class="p">()</span>
</code></pre></div></div>

<ul>
  <li data-marker="*">HTML can also be used inside the return value:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="s">f"&lt;h1&gt;Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">!&lt;/h1&gt;"</span><span class="p">.</span>
</code></pre></div></div>

<ul>
  <li data-marker="*">Inline HTML isn’t that useful, though. Separate HTML files can be used like so:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">"index.html"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li data-marker="*"><code class="highlighter-rouge">index.html</code> and any other template files should be stored in a directory named <code class="highlighter-rouge">templates</code>.</li>
  <li data-marker="*">
    <p>Variables can be defined as Python variables in <code class="highlighter-rouge">application.py</code> and used in HTML templates by passing them in as arguments to <code class="highlighter-rouge">render_template</code>. These templates are rendered using a separate templating language called Jinja2:</p>
  </li>
  <li data-marker="*">In <code class="highlighter-rouge">application.py</code>:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">headline</span> <span class="o">=</span> <span class="s">"Hello, world!"</span>
<span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">"index.html"</span><span class="p">,</span> <span class="n">headline</span><span class="o">=</span><span class="n">headline</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li data-marker="*">In <code class="highlighter-rouge">index.html</code>:</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;h1&gt;</span>{{ headline }}<span class="nt">&lt;/h1&gt;</span>

</code></pre></div></div>

<ul>
  <li data-marker="*">Jinja2 also allows for conditional statements:</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
{% if new_year %}
    <span class="nt">&lt;h1&gt;</span>Yes! Happy New Year!<span class="nt">&lt;/h1&gt;</span>
{% else %}
    <span class="nt">&lt;h1&gt;</span>No.<span class="nt">&lt;/h1&gt;</span>
{% endif %}

</code></pre></div></div>

<ul>
  <li data-marker="*">Loops:</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
{% for name in names %}
    <span class="nt">&lt;li&gt;</span>{{ name }}<span class="nt">&lt;/li&gt;</span>
{% endfor %}

</code></pre></div></div>

<ul>
  <li data-marker="*"><code class="highlighter-rouge">names</code> should be something that can be looped over, like a Python list, for example.</li>
  <li data-marker="*">If there are multiple routes on the Flask server, then one route can link to another as so:</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ url_for('more') }}"</span><span class="nt">&gt;</span>See more...<span class="nt">&lt;/a&gt;</span>

</code></pre></div></div>

<ul>
  <li data-marker="*"><code class="highlighter-rouge">more</code> is the name of a function associated with a route.</li>
</ul>

<h4 id="template-inheritance">Template Inheritance</h4>

<ul>
  <li data-marker="*">In order to cut down on repetitive HTML amongst many different pages, Jinja2 has a feature called ‘template inheritance’ that uses the idea of <code class="highlighter-rouge">block</code>s to organize content. For examples, have a look at <code class="highlighter-rouge">layout.html</code> and <code class="highlighter-rouge">index.html</code> in the <code class="highlighter-rouge">inheritance/</code> directory of the same source code.</li>
  <li data-marker="*">Everything in the <code class="highlighter-rouge">heading</code> block is placed where indicated in <code class="highlighter-rouge">layout.html</code>, and same for <code class="highlighter-rouge">body</code>.</li>
</ul>

<h4 id="forms">Forms</h4>

<ul>
  <li data-marker="*">With Flask and Jinja2, the results from HTML forms can now be actually stored and used.</li>
  <li data-marker="*">
    <p>An HTML form might look like this:</p>

    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">placeholder=</span><span class="s">"Enter Your Name"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;button&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;form&gt;</span>
</code></pre></div>    </div>

    <ul>
      <li data-marker="*">The <code class="highlighter-rouge">action</code> attribute lists the route that should be ‘notified’ when the form is submitted. In this case, it’s the URL for a function called <code class="highlighter-rouge">hello</code>.</li>
      <li data-marker="*">The <code class="highlighter-rouge">method</code> attribute is how the HTTP request to submit the form should be made. The default method is <code class="highlighter-rouge">get</code>, which is what browsers make when a URL is entered. When data is being submitted, however, <code class="highlighter-rouge">post</code> should be used.</li>
      <li data-marker="*">The <code class="highlighter-rouge">name</code> attribute of the input, while not new, is now relevant because it can be referenced when the form is submitted.</li>
    </ul>
  </li>
  <li data-marker="*">The Python code to process this form might look like this:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span>

<span class="c1"># some lines omitted here
</span>
<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/hello"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"POST"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span> <span class="c1"># take the request the user made, access the form,
</span>                                    <span class="c1"># and store the field called `name` in a Python variable also called `name`
</span>    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">"hello.html"</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li data-marker="*">The route <code class="highlighter-rouge">/hello</code> is the same <code class="highlighter-rouge">hello</code> listed in the Jinja2 code. This route can also accept the <code class="highlighter-rouge">POST</code> method, which is how the form’s data is being submitted. If any other method is used to access this route, a <code class="highlighter-rouge">Method Not Allowed</code> error  will be raised.
    <ul>
      <li data-marker="*">If there are multiple request methods that should be allowed, which method is being used can be checked with <code class="highlighter-rouge">request.method</code>, which will be equal to, for example, <code class="highlighter-rouge">"GET"</code> or <code class="highlighter-rouge">"POST"</code>.</li>
    </ul>
  </li>
</ul>

<h4 id="sessions">Sessions</h4>

<ul>
  <li data-marker="*">Sessions are how Flask can keep track of data that pertains to a particular user. Let’s take a note-taking app, for example. Users should only be able to see their own notes.</li>
  <li data-marker="*">To use sessions, they must be imported and set up:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">session</span> <span class="c1"># gives access to a variable called `session`
</span>                                                           <span class="c1"># which can be used to keep vaules that are specific to a particular user
</span><span class="kn">from</span> <span class="nn">flask_session</span> <span class="kn">import</span> <span class="n">Session</span> <span class="c1"># an additional extension to sessions which allows them
</span>                                  <span class="c1"># to be stored server-side
</span>
<span class="n">app</span><span class="p">.</span><span class="n">config</span><span class="p">[</span><span class="s">"SESSION_PERMANENT"</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">app</span><span class="p">.</span><span class="n">config</span><span class="p">[</span><span class="s">"SESSION_TYPE"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"filesystem"</span>
<span class="n">Session</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li data-marker="*">Then, assuming there is some HTML form that can submit a note, the note can be stored in a place specific to the user using their session:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"POST"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">session</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"notes"</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">session</span><span class="p">[</span><span class="s">"notes"</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">"POST"</span><span class="p">:</span>
        <span class="n">note</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"note"</span><span class="p">)</span>
        <span class="n">session</span><span class="p">[</span><span class="s">"notes"</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">"index.html"</span><span class="p">,</span> <span class="n">notes</span><span class="o">=</span><span class="n">session</span><span class="p">[</span><span class="s">"notes"</span><span class="p">])</span>

</code></pre></div></div>

<ul>
  <li data-marker="*"><code class="highlighter-rouge">notes</code> is the list where the notes will be stored. If the user doesn’t have a notes list already (checked with <code class="highlighter-rouge">if session.get("notes") is None</code>), then they are given an empty one.</li>
  <li data-marker="*">If a request is submitted via <code class="highlighter-rouge">"POST"</code> (that is, through the form), then the note is processed from the form in the same way as before.</li>
  <li data-marker="*">The processed note, now in a Python variable called <code class="highlighter-rouge">note</code>, is appended to the <code class="highlighter-rouge">notes</code> list. This list is itself inside a <code class="highlighter-rouge">dict</code> called <code class="highlighter-rouge">session</code>. Every user has a unique <code class="highlighter-rouge">session</code> <code class="highlighter-rouge">dict</code>, and therefore a unique <code class="highlighter-rouge">notes</code> list.</li>
  <li data-marker="*">Finally, the notelist is rendered by passing <code class="highlighter-rouge">session["notes"]</code> to <code class="highlighter-rouge">render_template</code>.</li>
</ul>


                </main>

            </div>

        </div>

        
 
    


</body>
<!-- Mirrored from cs50.harvard.edu/web/2018/notes/2/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 31 May 2020 07:07:59 GMT -->
</html>
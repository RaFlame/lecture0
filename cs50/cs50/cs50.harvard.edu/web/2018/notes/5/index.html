<!DOCTYPE html><html lang="en-us">
<!-- Mirrored from cs50.harvard.edu/web/2018/notes/5/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 31 May 2020 07:07:59 GMT -->
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta property="og:description" content="This course picks up where Harvard University's CS50 leaves off, diving more deeply into the design and implementation of web apps with Python, JavaScript, and SQL using frameworks like Flask, Django, and Bootstrap. Topics include database design, scalability, security, and user experience. Through hands-on projects, students learn to write and use APIs, create interactive UIs, and leverage cloud services like GitHub and Heroku. By semester's end, students emerge with knowledge and experience in principles, languages, and tools that empower them to design and deploy applications on the Internet.">

<meta property="og:image" content="../../../../../img.youtube.com/vi/24Kf3v7kZyE/maxresdefault.jpg"><meta property="og:title" content="JavaScript - CS50's Web Programming with Python and JavaScript"><link href="../../faviconb8b0.ico?1590121405" rel="icon">

<!-- https://fontawesome.com/how-to-use/on-the-web/referencing-icons/basic-use -->
<link href="../../assets/%40fortawesome/fontawesome-free/css/all.minb8b0.css?1590121405" rel="stylesheet">

<link href="../../assets/pageb8b0.css?1590121405" rel="stylesheet">

<!-- http://getbootstrap.com/docs/4.3/getting-started/introduction/ -->
<script src="../../assets/jquery/dist/jquery.minb8b0.js?1590121405"></script>
<script src="../../assets/popper.js/dist/umd/popper.minb8b0.js?1590121405"></script>
<script src="../../assets/bootstrap/dist/js/bootstrap.minb8b0.js?1590121405"></script>

<!-- https://github.com/pellepim/jstimezonedetect -->
<script src="../../assets/jstz.minb8b0.js?1590121405"></script>

<!-- https://momentjs.com/, https://momentjs.com/timezone/ -->
<script src="../../assets/moment.minb8b0.js?1590121405"></script>
<script src="../../assets/moment-timezone-with-data.minb8b0.js?1590121405"></script>



<script src="../../assets/jekyll-theme-cs50b8b0.js?1590121405"></script>

<title>JavaScript - CS50's Web Programming with Python and JavaScript</title>
</head>

    <body>

        

        <div class="container-fluid">

            <div class="row">

                <aside class="col-md">
 
                    <header><h1 data-id="cs50s-web-programming-with-python-and-javascript"><a href="../../index.html">CS50’s Web Programming with Python and JavaScript</a></h1>

<p>OpenCourseWare</p>

<p><a href="https://brianyu.me/">Brian Yu</a><br>
<a href="mailto:brian@cs.harvard.edu">brian@cs.harvard.edu</a></p>

<p><a href="https://cs.harvard.edu/malan/">David J. Malan</a><br>
<a href="mailto:malan@harvard.edu">malan@harvard.edu</a><br>
<a href="https://www.facebook.com/dmalan" class="pr-1"><i class="fab fa-facebook-f"></i></a>
<a href="https://github.com/dmalan" class="pr-1"><i class="fab fa-github"></i></a>
<a href="https://www.instagram.com/davidjmalan/" class="pr-1"><i class="fab fa-instagram"></i></a>
<a href="https://www.linkedin.com/in/malan/" class="pr-1"><i class="fab fa-linkedin-in"></i></a>
<a href="https://www.quora.com/profile/David-J-Malan" class="pr-1"><i class="fab fa-quora"></i></a>
<a href="https://twitter.com/davidjmalan" class="pr-1"><i class="fab fa-twitter"></i></a></p></header>

                    

                    <button aria-controls="nav" aria-expanded="false" class="btn btn-sm collapsed d-md-none" data-target="aside > nav" data-toggle="collapse">
                        Menu
                    </button>

                    <nav class="collapse d-md-block" id="nav"><hr>

<ol start="0">
  <li><a href="../../index.html#git">Git</a></li>
  <li><a href="../../index.html#html-css">HTML, CSS</a></li>
  <li><a href="../../index.html#flask">Flask</a></li>
  <li><a href="../../index.html#sql">SQL</a></li>
  <li><a href="../../index.html#orms-apis">ORMs, APIs</a></li>
  <li><a href="../../index.html#javascript">JavaScript</a></li>
  <li><a href="../../index.html#front-ends">Front Ends</a></li>
  <li><a href="../../index.html#django">Django</a></li>
  <li><a href="../../index.html#testing-cicd">Testing, CI/CD</a></li>
  <li><a href="../../index.html#github-travis-ci">GitHub, Travis CI</a></li>
  <li><a href="../../index.html#scalability">Scalability</a></li>
  <li><a href="../../index.html#security">Security</a></li>
</ol>

<hr>

<p><a href="../../certificate/index.html">CS50 Certificate</a></p>

<hr>

<ul>
  <li data-marker="*"><a href="https://cs50.harvard.edu/web/ed">Ed Discussion</a> for Q&amp;A</li>
  <li data-marker="*" class="small"><a href="../../quickstart.pdf">Quick Start Guide</a></li>
</ul>

<hr>

<ul class="small">
  <li data-marker="*"><a href="https://cs50.edx.org/web">edX</a></li>
  <li data-marker="*"><a href="https://itunes.apple.com/us/course/cs50s-web-programming-with-python-and-javascript/id1409824690">iTunes U</a></li>
  <li data-marker="*"><a href="https://www.youtube.com/playlist?list=PLhQjrBD2T382hIW-IsOVuXP1uMzEvmcE5">YouTube</a></li>
</ul>

<hr>

<ul class="small">
  <li data-marker="*"><a href="https://discord.gg/T8QZqRx">Discord</a></li>
  <li data-marker="*"><a href="https://www.facebook.com/groups/cs50/">Facebook Group</a></li>
  <li data-marker="*"><a href="https://www.facebook.com/cs50/">Facebook Page</a></li>
  <li data-marker="*"><a href="https://instagram.com/cs50">Instagram</a></li>
  <li data-marker="*"><a href="https://www.linkedin.com/groups/7437240/">LinkedIn Group</a></li>
  <li data-marker="*"><a href="https://www.quora.com/topic/CS50">Quora</a></li>
  <li data-marker="*"><a href="https://www.snapchat.com/add/cs50">Snapchat</a></li>
  <li data-marker="*"><a href="https://twitter.com/cs50">Twitter</a></li>
  <li data-marker="*"><a href="http://www.youtube.com/subscription_center?add_user=cs50tv">YouTube</a></li>
</ul>

<hr>

<p><a href="https://cs50.harvardshop.com/"><img src="https://drive.google.com/uc?export=view&amp;id=1oWgwFDv5cvtev23emjNlZfK64MEOmVu9" alt="Harvard Shop"></a></p>

<hr></nav>

                    <footer><p><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" class="small">CC BY-NC-SA 4.0</a></p></footer>

                </aside>

                <main class="col-md markdown-body">

                    <h1 id="javascript">JavaScript</h1>

<ul>
  <li data-marker="*">It is useful to distinguish between code that is run by the client, the user interacting with a web application, and the server, which is the Flask application running the website. The client makes an HTTP request to the server, which is a running some Python code. The server processes the response to understand what the client is asking for, and ultimately sends back some HTML and CSS content which is rendered in the client’s browser. It is often useful, however, to have code that does run client-side. Client-side processes reduce load on the server and are often faster.</li>
</ul>

<h2 id="using-javascript-with-html-and-css">Using JavaScript with HTML and CSS</h2>

<ul>
  <li data-marker="*">JavaScript is a programming language designed to be run inside a web browser that is run client-side. There are many different versions of JavaScript that are supported by different browsers, but there are certain standard versions that are supported by most. In this class, one of the more popular, recent versions, ES6, will be used.</li>
  <li data-marker="*">When embedded directly inside the HTML code for a webpage, it is enclosed in <code class="highlighter-rouge">&lt;script&gt;&lt;/script&gt;</code> tags.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;script&gt;</span>
      <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello, world!</span><span class="dl">'</span><span class="p">);</span>
  <span class="nt">&lt;/script&gt;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">The previous code example, if placed in the <code class="highlighter-rouge">head</code> element, for example, would run as soon as the page is loaded. JavaScript can also be run in response to events.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="kd">function</span> <span class="nx">hello</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello!</span><span class="dl">'</span><span class="p">);</span>
              <span class="p">}</span>
          <span class="nt">&lt;/script&gt;</span>
          <span class="nt">&lt;title&gt;</span>My Website<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1&gt;</span>Welcome!<span class="nt">&lt;/h1&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"hello()"</span><span class="nt">&gt;</span>Click Here!<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Now, the JavaScript code is contained inside a function. Note that the function is delimited by curly braces.</li>
      <li data-marker="*">The function <code class="highlighter-rouge">hello</code> is never called inside the <code class="highlighter-rouge">script</code> element. Rather, there is a <code class="highlighter-rouge">button</code> element with the <code class="highlighter-rouge">onclick</code> attribute which has the <code class="highlighter-rouge">hello</code> function as its value. The clicking of a button is one events that JavaScript understands which can be used as a trigger. In this case, that trigger runs the <code class="highlighter-rouge">hello</code> function.</li>
    </ul>
  </li>
  <li data-marker="*">Some other JavaScript events include:
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">onmouseover</code> : triggers when an element is hovered over</li>
      <li data-marker="*"><code class="highlighter-rouge">onkeydown</code> : triggers when a key is pressed</li>
      <li data-marker="*"><code class="highlighter-rouge">onkeyup</code> : triggers when a key is released</li>
      <li data-marker="*"><code class="highlighter-rouge">onload</code> : triggers when a page is loaded</li>
      <li data-marker="*"><code class="highlighter-rouge">onblur</code> : triggers when an object loses focus (when moving away from an input box, for example)</li>
    </ul>
  </li>
</ul>

<h3 id="manipulating-the-dom">Manipulating the DOM</h3>

<ul>
  <li data-marker="*">Beyond just displaying alerts, JavaScript has the power to actually change the contents of a webpage.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="c1">// Function to change heading to say goodbye</span>
              <span class="kd">function</span> <span class="nx">hello</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Goodbye!</span><span class="dl">'</span><span class="p">;</span>
              <span class="p">}</span>
          <span class="nt">&lt;/script&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1&gt;</span>Welcome!<span class="nt">&lt;/h1&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"hello()"</span><span class="nt">&gt;</span>Click Here!<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">document</code> refers to the web page currently being displayed.</li>
      <li data-marker="*"><code class="highlighter-rouge">querySelector('tag')</code> is a function that searches through the webpage for a particular CSS selector and returns that element. If there are multiple results, only the first result is returned.
        <ul>
          <li data-marker="*">This function can also be called as <code class="highlighter-rouge">document.querySelector('#id')</code> and <code class="highlighter-rouge">document.querySelector('.class')</code>. More sophisticated selectors, selecting only descendants of certain element,s for example, can also be used.</li>
        </ul>
      </li>
      <li data-marker="*">The <code class="highlighter-rouge">innerHTML</code> property of an element is the HTML content contained within the element’s tags.</li>
      <li data-marker="*">When the <code class="highlighter-rouge">button</code> is clicked, the text <code class="highlighter-rouge">Welcome!</code> changes to <code class="highlighter-rouge">Goodbye!</code>.</li>
    </ul>
  </li>
  <li data-marker="*">This slightly more advanced example showcases the use of variables in JavaScript.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

              <span class="kd">function</span> <span class="nx">count</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#counter</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">counter</span><span class="p">;</span>
              <span class="p">}</span>
          <span class="nt">&lt;/script&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"counter"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/h1&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"count()"</span><span class="nt">&gt;</span>Click Here!<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">let</code> is a keyword used to define variables.</li>
      <li data-marker="*"><code class="highlighter-rouge">counter++</code> is a shorthand to increment <code class="highlighter-rouge">counter</code> by 1.</li>
    </ul>
  </li>
  <li data-marker="*">Conditional statements in JavaScript look like this:
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;script&gt;</span>
      <span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="kd">function</span> <span class="nx">count</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#counter</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">counter</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">alert</span><span class="p">(</span><span class="s2">`Counter is at </span><span class="p">${</span><span class="nx">counter</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
          <span class="p">}</span>
      <span class="p">}</span>
  <span class="nt">&lt;/script&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">%</code> is the modulus operator, which returns the remainder of the first number divided by the second.</li>
      <li data-marker="*"><code class="highlighter-rouge">===</code> checks for exact equality in JavaScript; two things must be identical for it to return true.</li>
      <li data-marker="*">The argument to <code class="highlighter-rouge">alert</code> is a template literal, which is like a Python format string. <code class="highlighter-rouge">${counter}</code> is replaced with whatever the value of the variable <code class="highlighter-rouge">counter</code> is. Backticks are used to delimit a template literal.</li>
    </ul>
  </li>
  <li data-marker="*">JavaScript can also be factored out of the HTML code entirely.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nx">count</span><span class="p">;</span>
              <span class="p">});</span>

              <span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

              <span class="kd">function</span> <span class="nx">count</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#counter</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">counter</span><span class="p">;</span>

                  <span class="k">if</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                      <span class="nx">alert</span><span class="p">(</span><span class="s2">`Counter is at </span><span class="p">${</span><span class="nx">counter</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
                  <span class="p">}</span>
              <span class="p">}</span>
          <span class="nt">&lt;/script&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"counter"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/h1&gt;</span>
          <span class="nt">&lt;button&gt;</span>Click Here!<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Note that there is no <code class="highlighter-rouge">onclick</code> attribute in the HMTL tags for the <code class="highlighter-rouge">button</code> element. Nonetheless, the function <code class="highlighter-rouge">addEventListener</code>, which, likes it name suggests, ‘listens’, or waits, until the event <code class="highlighter-rouge">DOMContentLoaded</code> occurs. This event occurs when the entire HTML structure is loaded by the browser. Then, the second argument, a function, is called.</li>
      <li data-marker="*">JavaScript makes use of ‘higher order functions’, which means functions can be passed around like any other value. The function being passed is called a ‘callback’ function. The callback is called when the event being listened for occurs. In this case, that callback sets the <code class="highlighter-rouge">onclick</code> property of the <code class="highlighter-rouge">button</code> element to the <code class="highlighter-rouge">count</code> function, ultimately resulting in the same functionality as before.</li>
    </ul>
  </li>
  <li data-marker="*">Going one step further, the JavaScript code can be factored out of the <code class="highlighter-rouge">.html</code> file entirely into a separate <code class="highlighter-rouge">.js</code> file. Everything that’s inside the <code class="highlighter-rouge">script</code> element from the last example would go into the <code class="highlighter-rouge">.js</code> file, and the <code class="highlighter-rouge">.html</code> would look like this:
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"counter3.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"counter"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/h1&gt;</span>
          <span class="nt">&lt;button&gt;</span>Click Here!<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">This is exactly the same paradigm that was seen in factoring out CSS.</li>
    </ul>
  </li>
</ul>

<h3 id="variables">Variables</h3>

<ul>
  <li data-marker="*">There are three main keywords used to define variables in JavaScript.
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">const</code> : defines a constant variable that cannot be redefined later</li>
      <li data-marker="*"><code class="highlighter-rouge">let</code> : defines a variable is local to the scope of the innermost pair of curly braces surrounding it</li>
      <li data-marker="*"><code class="highlighter-rouge">var</code> : defines a variable that is local to the function it is defined in</li>
    </ul>
  </li>
  <li data-marker="*">Here is an example showcasing these different ways to define variables:
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;script&gt;</span>
      <span class="c1">// This variable exists even outside the loop</span>
      <span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello!</span><span class="dl">'</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">alert</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
  <span class="nt">&lt;/script&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Because <code class="highlighter-rouge">var</code> was used to define <code class="highlighter-rouge">message</code>, there will be no errors running this code.
        <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;script&gt;</span>
  <span class="c1">// This variable does not exist outside the loop</span>
  <span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello!</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">alert</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
  <span class="nt">&lt;/script&gt;</span>
</code></pre></div>        </div>
      </li>
      <li data-marker="*">Because <code class="highlighter-rouge">let</code> was used to define <code class="highlighter-rouge">message</code>, it cannot be passed to <code class="highlighter-rouge">alert</code>, which is outside the scope of <code class="highlighter-rouge">message</code>. If this were in an HTML page, when the page was opened, no alert would pop up. If the console were opened in the browser, there would be an <code class="highlighter-rouge">Uncaught ReferenceError</code>.
        <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;script&gt;</span>
  <span class="c1">// The value of const variables cannot change</span>
  <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello!</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Goodbye!</span><span class="dl">'</span><span class="p">;</span>

  <span class="nx">alert</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
  <span class="nt">&lt;/script&gt;</span>
</code></pre></div>        </div>
      </li>
      <li data-marker="*">Similar to the last example, no alert will pop up. In the console, there would be an <code class="highlighter-rouge">Uncaught TypeError</code>, since there was an attempt to redefine a variable defined with <code class="highlighter-rouge">const</code>.</li>
    </ul>
  </li>
  <li data-marker="*">The JavaScript console, accessable in the <strong>Develop</strong> or <strong>Inspect</strong> menu in a web browser, allows for the interactive entry of JavaScript, similiar to the Python console.</li>
  <li data-marker="*">Here’s another example which uses JavaScript to read info from a form.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#form</span><span class="dl">'</span><span class="p">).</span><span class="nx">onsubmit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                      <span class="kd">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#name</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
                      <span class="nx">alert</span><span class="p">(</span><span class="s2">`Hello </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
                  <span class="p">};</span>
              <span class="p">});</span>
          <span class="nt">&lt;/script&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"form"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"name"</span> <span class="na">autocomplete=</span><span class="s">"off"</span> <span class="na">autofocus</span> <span class="na">placeholder=</span><span class="s">"Name"</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;/form&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">The callback function here selects the element with the id <code class="highlighter-rouge">form</code> and sets its <code class="highlighter-rouge">onsubmit</code> (another event) property to another callback function which sets the <code class="highlighter-rouge">const</code> variable <code class="highlighter-rouge">name</code> to the <code class="highlighter-rouge">value</code> property returned from the elemnt with id <code class="highlighter-rouge">name</code>. <code class="highlighter-rouge">name</code> is the input box of a form, so <code class="highlighter-rouge">value</code> will be whatever the user has entered into the form.</li>
      <li data-marker="*">So, this code produces an alert that says hello to whatever name the user entered into the form.</li>
    </ul>
  </li>
</ul>

<h3 id="modifying-style">Modifying Style</h3>

<ul>
  <li data-marker="*">JavaScript can also modify the CSS properties of elements.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

                  <span class="c1">// Change font color to red</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#red</span><span class="dl">'</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#hello</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">;</span>
                  <span class="p">};</span>

                  <span class="c1">// Change font color to blue</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#blue</span><span class="dl">'</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#hello</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">blue</span><span class="dl">'</span><span class="p">;</span>
                  <span class="p">};</span>

                  <span class="c1">// Change font color to green</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#green</span><span class="dl">'</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#hello</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">green</span><span class="dl">'</span><span class="p">;</span>
                  <span class="p">};</span>
              <span class="p">});</span>
          <span class="nt">&lt;/script&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"hello"</span><span class="nt">&gt;</span>Hello!<span class="nt">&lt;/h1&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"red"</span><span class="nt">&gt;</span>Red<span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"blue"</span><span class="nt">&gt;</span>Blue<span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"green"</span><span class="nt">&gt;</span>Green<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">There are three buttons, each of which (after the initial callback from loading the webpage) have their <code class="highlighter-rouge">onclick</code> properties set to a function which sets the <code class="highlighter-rouge">style.color</code> property of the <code class="highlighter-rouge">hello</code> element to a different color. Any CSS property could be modified, e.g. <code class="highlighter-rouge">style.background-color</code>, <code class="highlighter-rouge">style.margin</code>, etc.</li>
    </ul>
  </li>
  <li data-marker="*">The repetitiveness of the last example can be reduced.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

                  <span class="c1">// Have each button change the color of the heading</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">.color-change</span><span class="dl">'</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">button</span><span class="p">)</span> <span class="p">{</span>
                      <span class="nx">button</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                          <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#hello</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">button</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
                      <span class="p">};</span>
                  <span class="p">});</span>

              <span class="p">});</span>
          <span class="nt">&lt;/script&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"hello"</span><span class="nt">&gt;</span>Hello!<span class="nt">&lt;/h1&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"color-change"</span> <span class="na">data-color=</span><span class="s">"red"</span><span class="nt">&gt;</span>Red<span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"color-change"</span> <span class="na">data-color=</span><span class="s">"blue"</span><span class="nt">&gt;</span>Blue<span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"color-change"</span> <span class="na">data-color=</span><span class="s">"green"</span><span class="nt">&gt;</span>Green<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">document.querySelectorAll('.color-change')</code> returns an array of all elements of the class <code class="highlighter-rouge">color-change</code>.</li>
      <li data-marker="*"><code class="highlighter-rouge">forEach</code> is a built-in JavaScript function that can be called on an array that runs a function passed to it on each element of an array. The function being passed takes as an argument one particular element of the array.</li>
      <li data-marker="*">Having all three buttons with the same class, <code class="highlighter-rouge">color-change</code>, allows for them to be selected together with <code class="highlighter-rouge">querySelectorAll</code>.</li>
      <li data-marker="*"><code class="highlighter-rouge">data-color</code> is a data attribute. Data attributes allow for the association of additional information with an element without changing how the element is rendered by the browser. Data attributes can have any name as long as they start with <code class="highlighter-rouge">data-</code>.</li>
      <li data-marker="*">Data atrributes can be accessed in the <code class="highlighter-rouge">dataset</code> property of an element. In this example, <code class="highlighter-rouge">data-color</code> is accessed in <code class="highlighter-rouge">dataset.color</code>.</li>
    </ul>
  </li>
</ul>

<h3 id="arrow-functions">Arrow Functions</h3>

<ul>
  <li data-marker="*">Since functions, especially anonymous functions, are so common in JavaScript, ES6 has introduced a new syntax for functions called arrow notation that allows for the definition of so-called arrow functions.
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello, world!</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">x</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">An arrow function is defined without using the word <code class="highlighter-rouge">function</code>, but rather just with a pair of parentheses enclosing any arguments the function takes, followed by an arrow, and finally the function body, enclosed in curly braces.</li>
      <li data-marker="*">Functions with only one argument can be defined without the use of parentheses enclosing the argument list.</li>
      <li data-marker="*">Functions that have only one line in the body can drop the curly braces and have the body on the same line as the argument list and arrow.</li>
    </ul>
  </li>
  <li data-marker="*">The previous example could be rewritten more succintly with arrow functions.
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

      <span class="c1">// Have each button change the color of the heading</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">.color-change</span><span class="dl">'</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">button</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">button</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#hello</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">button</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
          <span class="p">};</span>
      <span class="p">});</span>

  <span class="p">});</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">One last variation of this color example could use a drop-down menu to select colors instead of buttons.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

                  <span class="c1">// Change the color of the heading when dropdown changes</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#color-change</span><span class="dl">'</span><span class="p">).</span><span class="nx">onchange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#hello</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
                  <span class="p">};</span>

              <span class="p">});</span>
          <span class="nt">&lt;/script&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"hello"</span><span class="nt">&gt;</span>Hello!<span class="nt">&lt;/h1&gt;</span>
          <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"color-change"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"black"</span><span class="nt">&gt;</span>Black<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"red"</span><span class="nt">&gt;</span>Red<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"blue"</span><span class="nt">&gt;</span>Blue<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"green"</span><span class="nt">&gt;</span>Green<span class="nt">&lt;/option&gt;</span>
          <span class="nt">&lt;/select&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">onchange</code> is the event fired when the selection in a drop-down menu is changed.</li>
      <li data-marker="*"><code class="highlighter-rouge">this</code> refers to whatever value the function is operating on, which in this case is <code class="highlighter-rouge">document.querySelector('#color-change')</code>, which is the drop-down menu itself. The selected item is extracted using the <code class="highlighter-rouge">value</code> attribute of the drop-down menu, which corresponds to one of the color options.
        <ul>
          <li data-marker="*">Note that using <code class="highlighter-rouge">this</code> with arrow functions will produce different behavior. <code class="highlighter-rouge">this</code> inside an arrow function will be bound to whatever value <code class="highlighter-rouge">this</code> would have taken on inside the code that is enclosing the arrow function. By writing out <code class="highlighter-rouge">function ()</code>, then <code class="highlighter-rouge">this</code> takes on the value of whatever the function is being called on.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="more-with-javascript">More with JavaScript</h3>

<ul>
  <li data-marker="*">In the next example, the goal will to be create a to-do list application. Here’s the starting point:
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#new-task</span><span class="dl">'</span><span class="p">).</span><span class="nx">onsubmit</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

                      <span class="c1">// Create new item for list</span>
                      <span class="kd">const</span> <span class="nx">li</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">li</span><span class="dl">'</span><span class="p">);</span>
                      <span class="nx">li</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#task</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>

                      <span class="c1">// Add new item to task list</span>
                      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#tasks</span><span class="dl">'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">li</span><span class="p">);</span>

                      <span class="c1">// Clear input field</span>
                      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#task</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

                      <span class="c1">// Stop form from submitting</span>
                      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                  <span class="p">};</span>

              <span class="p">});</span>
          <span class="nt">&lt;/script&gt;</span>
          <span class="nt">&lt;title&gt;</span>Tasks<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1&gt;</span>Tasks<span class="nt">&lt;/h1&gt;</span>
          <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"tasks"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;/ul&gt;</span>
          <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"new-task"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"task"</span> <span class="na">autocomplete=</span><span class="s">"off"</span> <span class="na">autofocus</span> <span class="na">placeholder=</span><span class="s">"New Task"</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;/form&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">The <code class="highlighter-rouge">tasks</code> unordered list starts empty, but will be populated with user input.</li>
      <li data-marker="*">In the JavaScript code, when the form is submitted, a new <code class="highlighter-rouge">li</code> element is assigned to the <code class="highlighter-rouge">const</code> variable <code class="highlighter-rouge">li</code> using the function <code class="highlighter-rouge">document.createElement('li')</code>. Then, the <code class="highlighter-rouge">innerHTML</code> of that <code class="highlighter-rouge">li</code> is set to be whatever the <code class="highlighter-rouge">value</code> of the <code class="highlighter-rouge">task</code> input field is.</li>
      <li data-marker="*">The new <code class="highlighter-rouge">li</code> is then added to the <code class="highlighter-rouge">ul</code> <code class="highlighter-rouge">tasks</code> with the <code class="highlighter-rouge">append(li)</code> function, called on the <code class="highlighter-rouge">ul</code>.</li>
      <li data-marker="*">Finally, the input field is cleared and the default behavior for a form, which is to go to some other website and reload the page, is suppressed by returning <code class="highlighter-rouge">false</code>.</li>
    </ul>
  </li>
  <li data-marker="*">Blank submissions can be omitted by conditionally enabling the submit button.
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// By default, submit button is disabled</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#submit</span><span class="dl">'</span><span class="p">).</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="c1">// Enable button only if there is text in the input field</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#task</span><span class="dl">'</span><span class="p">).</span><span class="nx">onkeyup</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#submit</span><span class="dl">'</span><span class="p">).</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="c1">// ...same code as before...</span>

  <span class="c1">// Disable button again after submit</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#submit</span><span class="dl">'</span><span class="p">).</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="c1">// Stop form from submitting</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">};</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">This results in the button only being pressable once some keypress has been registered, assuming that the field is then populated.</li>
    </ul>
  </li>
  <li data-marker="*">The previous implementation would still allow for submission if text was entered and then erased from the form. This can be remedied by checking that the <code class="highlighter-rouge">length</code> property of the <code class="highlighter-rouge">value</code> attribute of the form input is indeed greater than 0 after every keystroke.
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// Enable button only if there is text in the input field</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#task</span><span class="dl">'</span><span class="p">).</span><span class="nx">onkeyup</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#task</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#submit</span><span class="dl">'</span><span class="p">).</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">else</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#submit</span><span class="dl">'</span><span class="p">).</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">};</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Another feature of JavaScript is the ability to wait for a certain amount of time.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                  <span class="nx">setInterval</span><span class="p">(</span><span class="nx">count</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
              <span class="p">});</span>

              <span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

              <span class="kd">function</span> <span class="nx">count</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#counter</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">counter</span><span class="p">;</span>
              <span class="p">}</span>
          <span class="nt">&lt;/script&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"counter"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/h1&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">The <code class="highlighter-rouge">setInterval</code> function takes another function and then the interval (in milliseconds), after which the passed function will be automatically called over and over.</li>
      <li data-marker="*">The result, in this example, is an automatically incrementing counter without the need for any buttons.</li>
    </ul>
  </li>
  <li data-marker="*">If the previous example were reloaded, the counter would be reset. The maintain some persistence, JavaScript can use local storage to keep track of some state information.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script&gt;</span>
              <span class="c1">// Set starting value of counter to 0</span>
              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">counter</span><span class="dl">'</span><span class="p">))</span>
                  <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">counter</span><span class="dl">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

              <span class="c1">// Load current value of  counter</span>
              <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#counter</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">counter</span><span class="dl">'</span><span class="p">);</span>

                  <span class="c1">// Count every time button is clicked</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                      <span class="c1">// Increment current counter</span>
                      <span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">counter</span><span class="dl">'</span><span class="p">);</span>
                      <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>

                      <span class="c1">// Update counter</span>
                      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#counter</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">counter</span><span class="p">;</span>
                      <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">counter</span><span class="dl">'</span><span class="p">,</span> <span class="nx">counter</span><span class="p">);</span>
                  <span class="p">}</span>
              <span class="p">});</span>
          <span class="nt">&lt;/script&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"counter"</span><span class="nt">&gt;&lt;/h1&gt;</span>
          <span class="nt">&lt;button&gt;</span>Click Here!<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">localStorage</code> is the variable that JavaScript can store information at. <code class="highlighter-rouge">getItem</code> and <code class="highlighter-rouge">setItem</code> can be called on <code class="highlighter-rouge">localStorage</code> to either load or save data. This example first tries to load <code class="highlighter-rouge">counter</code>, and if it’s not there, saves a new <code class="highlighter-rouge">counter</code> with value <code class="highlighter-rouge">0</code>.</li>
      <li data-marker="*">Then, the <code class="highlighter-rouge">counter</code> element is initially set to that <code class="highlighter-rouge">counter</code> item in storage. After that, a variable called <code class="highlighter-rouge">counter</code> is used to reference the <code class="highlighter-rouge">counter</code> item, and after every update of the <code class="highlighter-rouge">counter</code> variable, the <code class="highlighter-rouge">counter</code> item in <code class="highlighter-rouge">localStorage</code> has its value updated.</li>
      <li data-marker="*">Now, closing and reloading the page will not reset the value of the counter.</li>
    </ul>
  </li>
</ul>

<h2 id="integrating-javascript-with-python-and-flask">Integrating JavaScript with Python and Flask</h2>

<ul>
  <li data-marker="*">Ajax, is used to get more information from server without needing to reload an entirely new page. As an example, Ajax can be used with the currency conversion example from last week to display a conversion without needing to load a new page. This is not done by pre-loading all possible exchange rates, but by making an Ajax request to the Flask server, which will get a particular exchange rate whenever it is asked for. JavaScript can then be used to update the DOM to render the new content.</li>
  <li data-marker="*">Here’s the interesting part of <code class="highlighter-rouge">application.py</code>. There’s not much different here from last week, but note that what’s being returned is not a new webpage, but rather just a JSON object.
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/convert"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"POST"</span><span class="p">])</span>
  <span class="k">def</span> <span class="nf">convert</span><span class="p">():</span>

      <span class="c1"># Query for currency exchange rate
</span>      <span class="n">currency</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"currency"</span><span class="p">)</span>
      <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"https://api.fixer.io/latest"</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
          <span class="s">"base"</span><span class="p">:</span> <span class="s">"USD"</span><span class="p">,</span> <span class="s">"symbols"</span><span class="p">:</span> <span class="n">currency</span><span class="p">})</span>

      <span class="c1"># Make sure request succeeded
</span>      <span class="k">if</span> <span class="n">res</span><span class="p">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
          <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">"success"</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>

      <span class="c1"># Make sure currency is in response
</span>      <span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">currency</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s">"rates"</span><span class="p">]:</span>
          <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">"success"</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>

      <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">"success"</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">"rate"</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s">"rates"</span><span class="p">][</span><span class="n">currency</span><span class="p">]})</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">The HTML is simply a basic form. The JavaScript code is in a different file, but linked in the <code class="highlighter-rouge">head</code>.
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">""</span><span class="nt">&gt;&lt;/script&gt;</span>
          <span class="nt">&lt;title&gt;</span>Currency Converter<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"form"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"currency"</span> <span class="na">autocomplete=</span><span class="s">"off"</span> <span class="na">autofocus</span> <span class="na">placeholder=</span><span class="s">"Currency"</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Get Exchange Rate"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;/form&gt;</span>
          <span class="nt">&lt;br&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"result"</span><span class="nt">&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">url_for('static', filename='index.js')</code> is Flask’s way of incorporating <code class="highlighter-rouge">.js</code> files. <code class="highlighter-rouge">static</code> is a separate folder.</li>
      <li data-marker="*">The <code class="highlighter-rouge">result</code> <code class="highlighter-rouge">div</code> will contain the conversion, but is currently blank.</li>
    </ul>
  </li>
  <li data-marker="*">The interesting code is inside of <code class="highlighter-rouge">index.js</code>.
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#form</span><span class="dl">'</span><span class="p">).</span><span class="nx">onsubmit</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

          <span class="c1">// Initialize new request</span>
          <span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
          <span class="kd">const</span> <span class="nx">currency</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#currency</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">/convert</span><span class="dl">'</span><span class="p">);</span>

          <span class="c1">// Callback function for when request completes</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

              <span class="c1">// Extract JSON data from request</span>
              <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>

              <span class="c1">// Update the result div</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
                  <span class="kd">const</span> <span class="nx">contents</span> <span class="o">=</span> <span class="s2">`1 USD is equal to </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">rate</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">currency</span><span class="p">}</span><span class="s2">.`</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#result</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">contents</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#result</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">There was an error.</span><span class="dl">'</span><span class="p">;</span>
              <span class="p">}</span>
          <span class="p">}</span>

          <span class="c1">// Add data to send with request</span>
          <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">'</span><span class="s1">currency</span><span class="dl">'</span><span class="p">,</span> <span class="nx">currency</span><span class="p">);</span>

          <span class="c1">// Send request</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">};</span>

  <span class="p">});</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">An <code class="highlighter-rouge">XMLHttpRequest</code> is just an object that will allow an Ajax request to be made.</li>
      <li data-marker="*"><code class="highlighter-rouge">request.open</code> is where the new request is actually initialized, with the HTTP method and route being specified.</li>
      <li data-marker="*"><code class="highlighter-rouge">JSON.parse</code> converts the raw response (<code class="highlighter-rouge">request.responseText</code>) into an object that can be indexed by keys and values.</li>
      <li data-marker="*">The rest of the callback simply updates the HTML using template literals to reflect the result of the conversion.</li>
      <li data-marker="*"><code class="highlighter-rouge">FormData</code> is just an object that holds whatever the user input is.</li>
    </ul>
  </li>
</ul>

<h2 id="websockets">Websockets</h2>

<ul>
  <li data-marker="*">The request-response model, which has been the basis for how HTTP requests and client-server interaction has been discussed so far, is useful as long as data is only being passed when a request is made. But, with ‘full-duplex communication’, more simply described as real-time communication, there is (or shouldn’t be) a need for reloading a webpage and making a new request just to check, for example, if someone sent a message in a chat room. Websockets are a protocol that allow for this type of communication, and Socket.IO is a particular JavaScript library that supports this protocol.</li>
  <li data-marker="*">This example will be based around a voting application that will count and display votes in real-time. Here’s the full <code class="highlighter-rouge">application.py</code>, with all the setup and import statements.
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">import</span> <span class="nn">os</span>
  <span class="kn">import</span> <span class="nn">requests</span>

  <span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span>
  <span class="kn">from</span> <span class="nn">flask_socketio</span> <span class="kn">import</span> <span class="n">SocketIO</span><span class="p">,</span> <span class="n">emit</span>

  <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
  <span class="n">app</span><span class="p">.</span><span class="n">config</span><span class="p">[</span><span class="s">"SECRET_KEY"</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">"SECRET_KEY"</span><span class="p">)</span>
  <span class="n">socketio</span> <span class="o">=</span> <span class="n">SocketIO</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

  <span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
      <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">"index.html"</span><span class="p">)</span>

  <span class="o">@</span><span class="n">socketio</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"submit vote"</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">vote</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
      <span class="n">selection</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">"selection"</span><span class="p">]</span>
      <span class="n">emit</span><span class="p">(</span><span class="s">"announce vote"</span><span class="p">,</span> <span class="p">{</span><span class="s">"selection"</span><span class="p">:</span> <span class="n">selection</span><span class="p">},</span> <span class="n">broadcast</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="highlighter-rouge">flask_socketio</code> is a library that allows for websockets inside a Flask application. This library allows for the web server and client to be emitting events to all other users, while also listening for and receiving events being broadcasted by others.</li>
      <li data-marker="*"><code class="highlighter-rouge">submit vote</code> is an event that will be broadcasted whenever a vote is submitted. The code for this will be in JavaScript.</li>
      <li data-marker="*">Once a vote is received, the vote is announced to all users (<code class="highlighter-rouge">broadcast=True</code>) with the <code class="highlighter-rouge">emit</code> function.</li>
    </ul>
  </li>
  <li data-marker="*"><code class="highlighter-rouge">index.html</code>:
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
          <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
          <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">""</span><span class="nt">&gt;&lt;/script&gt;</span>
          <span class="nt">&lt;title&gt;</span>Vote<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
          <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"votes"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;/ul&gt;</span>
          <span class="nt">&lt;hr&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">data-vote=</span><span class="s">"yes"</span><span class="nt">&gt;</span>Yes<span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">data-vote=</span><span class="s">"no"</span><span class="nt">&gt;</span>No<span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">data-vote=</span><span class="s">"maybe"</span><span class="nt">&gt;</span>Maybe<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*"><code class="highlighter-rouge">index.js</code>:
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

      <span class="c1">// Connect to websocket</span>
      <span class="kd">var</span> <span class="nx">socket</span> <span class="o">=</span> <span class="nx">io</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">//</span><span class="dl">'</span> <span class="o">+</span> <span class="nb">document</span><span class="p">.</span><span class="nx">domain</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">:</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">location</span><span class="p">.</span><span class="nx">port</span><span class="p">);</span>

      <span class="c1">// When connected, configure buttons</span>
      <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connect</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

          <span class="c1">// Each button should emit a "submit vote" event</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">button</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="nx">button</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                  <span class="kd">const</span> <span class="nx">selection</span> <span class="o">=</span> <span class="nx">button</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">vote</span><span class="p">;</span>
                  <span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">submit vote</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="dl">'</span><span class="s1">selection</span><span class="dl">'</span><span class="p">:</span> <span class="nx">selection</span><span class="p">});</span>
              <span class="p">};</span>
          <span class="p">});</span>
      <span class="p">});</span>

      <span class="c1">// When a new vote is announced, add to the unordered list</span>
      <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">announce vote</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">li</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">li</span><span class="dl">'</span><span class="p">);</span>
          <span class="nx">li</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`Vote recorded: </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">selection</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#votes</span><span class="dl">'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">li</span><span class="p">);</span>
      <span class="p">});</span>
  <span class="p">});</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">First, the websocket connection is established using a standard line to connect to wherever the application is currently running at.</li>
      <li data-marker="*"><code class="highlighter-rouge">submit vote</code> is the name of the event that’s being submitted on a button click. That event just sends whatever the vote was.</li>
      <li data-marker="*"><code class="highlighter-rouge">announce vote</code> is an event received from the Python sever, which triggers the updating of the vote list.</li>
    </ul>
  </li>
  <li data-marker="*">An improvement to this application would be to display a total vote count, instead of just listing every individual vote, and making sure that new users can see past votes.</li>
  <li data-marker="*">Changes to <code class="highlighter-rouge">application.py</code>:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">votes</span> <span class="o">=</span> <span class="p">{</span><span class="s">"yes"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"no"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"maybe"</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

  <span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
      <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">"index.html"</span><span class="p">,</span> <span class="n">votes</span><span class="o">=</span><span class="n">votes</span><span class="p">)</span>

  <span class="o">@</span><span class="n">socketio</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"submit vote"</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">vote</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
      <span class="n">selection</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">"selection"</span><span class="p">]</span>
      <span class="n">votes</span><span class="p">[</span><span class="n">selection</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="n">emit</span><span class="p">(</span><span class="s">"vote totals"</span><span class="p">,</span> <span class="n">votes</span><span class="p">,</span> <span class="n">broadcast</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Now, any vote submissions are first used to update the <code class="highlighter-rouge">votes</code> dictionary to keep a record of vote totals. Then, that entire dictionary is broadcasted.</li>
    </ul>
  </li>
  <li data-marker="*">Changes to <code class="highlighter-rouge">index.html</code>:
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;body&gt;</span>
      <span class="nt">&lt;div&gt;</span>Yes Votes: <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"yes"</span><span class="nt">&gt;&lt;/span&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;div&gt;</span>No Votes: <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"no"</span><span class="nt">&gt;&lt;/span&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;div&gt;</span>Maybe Votes: <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"maybe"</span><span class="nt">&gt;&lt;span&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;hr&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">data-vote=</span><span class="s">"yes"</span><span class="nt">&gt;</span>Yes<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">data-vote=</span><span class="s">"no"</span><span class="nt">&gt;</span>No<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">data-vote=</span><span class="s">"maybe"</span><span class="nt">&gt;</span>Maybe<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">The <code class="highlighter-rouge">span</code> elements allocate a space for vote tallies to be filled in later.</li>
    </ul>
  </li>
  <li data-marker="*">Changes to <code class="highlighter-rouge">index.js</code>:
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">vote totals</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#yes</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">yes</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#no</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">no</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#maybe</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">maybe</span><span class="p">;</span>
  <span class="p">});</span>
</code></pre></div>    </div>
  </li>
</ul>


                </main>

            </div>

        </div>

        
 
    


</body>
<!-- Mirrored from cs50.harvard.edu/web/2018/notes/5/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 31 May 2020 07:07:59 GMT -->
</html>